<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R2 Solutions - Savings Account Portal</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #000000 0%, #333333 100%);
            min-height: 100vh;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            box-shadow: 0 2px 20px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo h1 {
            color: #fcbf01;
            font-size: 1.5em;
            font-weight: 700;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 0.9em;
            color: #666;
        }

        .logout-btn {
            background: #dc3545;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: background 0.3s ease;
        }

        .logout-btn:hover {
            background: #c82333;
        }

        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .login-form {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
        }

        .login-form h2 {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
            font-size: 1.8em;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        input, textarea {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: #fcbf01;
            box-shadow: 0 0 0 3px rgba(252, 191, 1, 0.1);
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #fcbf01 0%, #f39c12 100%);
            color: #000000;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(252, 191, 1, 0.4);
        }

        .dashboard {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px;
            display: none;
        }

        .dashboard.active {
            display: block;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .balance-card {
            background: linear-gradient(135deg, #fcbf01 0%, #f39c12 100%);
            color: #000000;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(252, 191, 1, 0.3);
        }

        .balance-amount {
            font-size: 3em;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .balance-label {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .vesting-card {
            background: linear-gradient(135deg, #000000 0%, #333333 100%);
            color: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 2px solid #fcbf01;
        }

        .vesting-progress {
            margin: 20px 0;
        }

        .progress-bar {
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            height: 10px;
            overflow: hidden;
        }

        .progress-fill {
            background: #fcbf01;
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border-left: 4px solid #fcbf01;
        }

        .stat-number {
            font-size: 2em;
            font-weight: 700;
            color: #fcbf01;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9em;
        }

        .transactions-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 1.5em;
            font-weight: 700;
            color: #333;
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            transition: background 0.3s ease;
        }

        .transaction-item:hover {
            background: #f8f9fa;
        }

        .transaction-item:last-child {
            border-bottom: none;
        }

        .transaction-details {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .transaction-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
        }

        .transaction-icon.deposit {
            background: #d4edda;
            color: #155724;
        }

        .transaction-icon.growth {
            background: #fff3cd;
            color: #856404;
        }

        .transaction-icon.contribution {
            background: #fcbf01;
            color: #000000;
        }

        .transaction-info h4 {
            margin-bottom: 3px;
            color: #333;
        }

        .transaction-info p {
            color: #666;
            font-size: 0.9em;
        }

        .transaction-amount {
            font-weight: 600;
            font-size: 1.1em;
        }

        .transaction-amount.positive {
            color: #28a745;
        }

        .transaction-amount.negative {
            color: #dc3545;
        }

        .charts-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .chart-card {
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .chart-placeholder {
            height: 200px;
            background: linear-gradient(45deg, #f0f0f0, #e0e0e0);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-style: italic;
        }

        .actions-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .action-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            text-align: center;
            transition: all 0.3s ease;
        }

        .action-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }

        .action-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .action-card h3 {
            margin-bottom: 10px;
            color: #333;
        }

        .action-card p {
            color: #666;
            margin-bottom: 20px;
            font-size: 0.9em;
        }

        .btn-secondary {
            background: #333333;
            color: white;
            border: 2px solid #fcbf01;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: #fcbf01;
            color: #000000;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        .disclaimer {
            background: #333333;
            border: 1px solid #fcbf01;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            font-size: 0.9em;
            color: #ffffff;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .charts-section {
                grid-template-columns: 1fr;
            }
            
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .user-info {
                text-align: center;
            }
            
            .balance-amount {
                font-size: 2.5em;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiNmY2JmMDEiLz4KPHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTYiIGZpbGw9IiNmY2JmMDEiLz4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMTIiIGZpbGw9IiNmZmZmZmYiLz4KPC9zdmc+Cjwvc3ZnPgo=" alt="R2 Solutions" style="width: 32px; height: 32px;">
                <h1>R2 SOLUTIONS</h1>
            </div>
            <div class="user-info" id="userInfo" style="display: none;">
                <span>Welcome, <strong id="userName"></strong></span>
                <span>|</span>
                <span>Account: <strong id="accountNumber"></strong></span>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </div>
    </div>

    <!-- Login Form -->
    <div class="login-container" id="loginContainer">
        <div class="login-form">
            <h2>üîê Account Login</h2>
            <div id="loginAlert"></div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="accountNumber">Account Number</label>
                    <input type="text" id="accountNumberInput" placeholder="Enter your account number" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="passwordInput" placeholder="Enter your password" required>
                </div>
                <button type="submit" class="btn">Login</button>
            </form>
            <div class="disclaimer">
                <p><strong>‚ö†Ô∏è Demo Accounts:</strong></p>
                <p>Account: R2-2024-001 | Password: demo123</p>
                <p>Account: R2-2024-002 | Password: maria2024</p>
                <p>Account: R2-2024-003 | Password: carlo123</p>
            </div>
        </div>
    </div>

    <!-- Dashboard -->
    <div class="dashboard" id="dashboard">
        <!-- Main Balance & Vesting Cards -->
        <div class="dashboard-grid">
            <div class="balance-card">
                <div class="balance-amount" id="currentBalance">‚Ç±2,456</div>
                <div class="balance-label">Current Balance</div>
                <div style="margin-top: 15px; font-size: 0.9em; opacity: 0.9;">
                    Monthly Growth: <span id="monthlyGrowth">+‚Ç±54</span>
                </div>
            </div>

            <div class="vesting-card">
                <h3>Vesting Progress</h3>
                <div class="vesting-progress">
                    <div class="progress-bar">
                        <div class="progress-fill" id="vestingProgress" style="width: 22.8%;"></div>
                    </div>
                    <div style="margin-top: 10px;">
                        <span id="vestingMonths">5.5</span> of 24 months completed
                    </div>
                </div>
                <div style="margin-top: 15px;">
                    <strong>Projected at Vesting: ‚Ç±10,900</strong>
                </div>
            </div>
        </div>

        <!-- Statistics Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">‚Ç±2,000</div>
                <div class="stat-label">Initial Deposit</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="totalGrowth">‚Ç±456</div>
                <div class="stat-label">Total Growth</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="additionalContributions">‚Ç±0</div>
                <div class="stat-label">Additional Contributions</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="managementFees">‚Ç±0</div>
                <div class="stat-label">Management Fees</div>
            </div>
        </div>

        <!-- Transaction History -->
        <div class="transactions-section">
            <div class="section-header">
                <h3 class="section-title">üìä Transaction History</h3>
                <button class="btn-secondary" onclick="downloadStatement()">Download Statement</button>
            </div>
            <div id="transactionList">
                <!-- Dynamic content -->
            </div>
        </div>

        <!-- Charts Section -->
        <div class="charts-section">
            <div class="chart-card">
                <h3>Balance Growth Over Time</h3>
                <div class="chart-placeholder">
                    Interactive chart will be displayed here
                </div>
            </div>
            <div class="chart-card">
                <h3>Monthly Returns</h3>
                <div class="chart-placeholder">
                    Monthly performance chart
                </div>
            </div>
        </div>

        <!-- Action Cards -->
        <div class="actions-section">
            <div class="action-card">
                <div class="action-icon">üíµ</div>
                <h3>Add Contribution</h3>
                <p>Make additional contributions to grow your savings faster</p>
                <button class="btn-secondary" onclick="openModal('contributionModal')">Add Funds</button>
            </div>
            <div class="action-card">
                <div class="action-icon">üìß</div>
                <h3>Monthly Statement</h3>
                <p>Download your detailed monthly account statement</p>
                <button class="btn-secondary" onclick="downloadStatement()">Download</button>
            </div>
            <div class="action-card">
                <div class="action-icon">üí∏</div>
                <h3>Withdrawal Request</h3>
                <p>Request withdrawal of your additional contributions (vested funds only)</p>
                <button class="btn-secondary" onclick="openModal('withdrawalModal')">Request Withdrawal</button>
            </div>
        </div>
    </div>

    <!-- Contribution Modal -->
    <div class="modal" id="contributionModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üíµ Add Contribution</h3>
                <button class="close-btn" onclick="closeModal('contributionModal')">&times;</button>
            </div>
            <form id="contributionForm">
                <div class="form-group">
                    <label for="contributionAmount">Contribution Amount</label>
                    <input type="number" id="contributionAmount" placeholder="Enter amount" min="100" required>
                </div>
                <div class="disclaimer">
                    <p><strong>Note:</strong> Additional contributions are immediately accessible and not subject to the 2-year vesting period. Only the base ‚Ç±2,000 + its earnings are vested.</p>
                </div>
                <button type="submit" class="btn">Add Contribution</button>
            </form>
        </div>
    </div>

    <!-- Withdrawal Request Modal -->
    <div class="modal" id="withdrawalModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üí∏ Withdrawal Request</h3>
                <button class="close-btn" onclick="closeModal('withdrawalModal')">&times;</button>
            </div>
            <div id="withdrawalInfo">
                <div style="background: #e7f3ff; padding: 15px; border-radius: 10px; margin-bottom: 20px;">
                    <h4>Available for Withdrawal:</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 10px;">
                        <div>
                            <strong>Additional Contributions:</strong><br>
                            <span style="color: #28a745; font-size: 1.2em;">‚Ç±<span id="availableContributions">0</span></span>
                        </div>
                        <div>
                            <strong>Vested Base + Earnings:</strong><br>
                            <span style="color: #6c757d; font-size: 1.2em;" id="vestedAmount">‚Ç±0 (Not vested yet)</span>
                        </div>
                    </div>
                </div>
                
                <form id="withdrawalForm">
                    <div class="form-group">
                        <label for="withdrawalAmount">Withdrawal Amount</label>
                        <input type="number" id="withdrawalAmount" placeholder="Enter amount" min="100" required>
                        <small style="color: #666;">Minimum withdrawal: ‚Ç±100</small>
                    </div>
                    
                    <div class="form-group">
                        <label for="withdrawalReason">Reason for Withdrawal (Optional)</label>
                        <textarea id="withdrawalReason" placeholder="Emergency, investment, etc." rows="3"></textarea>
                    </div>
                    
                    <div class="disclaimer">
                        <p><strong>Important Notes:</strong></p>
                        <ul style="margin-left: 20px; margin-top: 5px;">
                            <li>Only additional contributions and vested amounts can be withdrawn</li>
                            <li>Base ‚Ç±2,000 + earnings are locked until 2-year vesting period</li>
                            <li>Withdrawal requests processed within 3-5 business days</li>
                            <li>You'll receive email confirmation once approved</li>
                        </ul>
                    </div>
                    
                    <button type="submit" class="btn">Submit Withdrawal Request</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Support Modal -->
    <div class="modal" id="supportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìû Contact Support</h3>
                <button class="close-btn" onclick="closeModal('supportModal')">&times;</button>
            </div>
            <div style="text-align: center;">
                <p style="margin-bottom: 20px;">Need help with your R2 Solutions savings account?</p>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin-bottom: 20px;">
                    <h4>üìß Email Support</h4>
                    <p><strong>reliable.resource.02@gmail.com</strong></p>
                    <p style="font-size: 0.9em; color: #666;">Response within 24 hours</p>
                </div>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                    <h4>‚è∞ Business Hours</h4>
                    <p>Monday - Friday: 9:00 AM - 6:00 PM</p>
                    <p style="font-size: 0.9em; color: #666;">Philippine Standard Time</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Client accounts database
        const clientAccounts = {
            'R2-2024-001': {
                password: 'demo123',
                userName: 'Juan dela Cruz',
                email: 'juan.delacruz@email.com',
                resultsCXStartDate: '2024-06-15',
                savingsStartDate: '2024-10-15',
                currentBalance: 2456.37,
                initialDeposit: 2000,
                totalGrowth: 456.37,
                additionalContributions: 0,
                managementFees: 0,
                vestingMonths: 5.5,
                isVested: false,
                transactions: [
                    { date: '2024-10-15', type: 'deposit', description: 'Initial Deposit', amount: 2000, balance: 2000 },
                    { date: '2024-10-31', type: 'growth', description: 'Monthly Growth (2.1%)', amount: 42.00, balance: 2042.00 },
                    { date: '2024-11-30', type: 'growth', description: 'Monthly Growth (2.3%)', amount: 46.97, balance: 2088.97 },
                    { date: '2024-12-31', type: 'growth', description: 'Monthly Growth (2.7%)', amount: 56.40, balance: 2145.37 }
                ]
            },
            'R2-2024-002': {
                password: 'maria2024',
                userName: 'Maria Santos',
                email: 'maria.santos@email.com',
                resultsCXStartDate: '2024-07-01',
                savingsStartDate: '2024-11-01',
                currentBalance: 2150.30,
                initialDeposit: 2000,
                totalGrowth: 150.30,
                additionalContributions: 0,
                managementFees: 0,
                vestingMonths: 3.0,
                isVested: false,
                transactions: [
                    { date: '2024-11-01', type: 'deposit', description: 'Initial Deposit', amount: 2000, balance: 2000 },
                    { date: '2024-11-30', type: 'growth', description: 'Monthly Growth (2.2%)', amount: 44.00, balance: 2044.00 },
                    { date: '2024-12-31', type: 'growth', description: 'Monthly Growth (2.6%)', amount: 53.14, balance: 2097.14 }
                ]
            },
            'R2-2024-003': {
                password: 'carlo123',
                userName: 'Carlo Reyes',
                email: 'carlo.reyes@email.com',
                resultsCXStartDate: '2024-08-15',
                savingsStartDate: '2024-12-15',
                currentBalance: 2048.50,
                initialDeposit: 2000,
                totalGrowth: 48.50,
                additionalContributions: 0,
                managementFees: 0,
                vestingMonths: 1.5,
                isVested: false,
                transactions: [
                    { date: '2024-12-15', type: 'deposit', description: 'Initial Deposit', amount: 2000, balance: 2000 },
                    { date: '2024-12-31', type: 'growth', description: 'Monthly Growth (2.4%)', amount: 48.50, balance: 2048.50 }
                ]
            }
        };

        let currentAccount = null;

        // Login functionality
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const accountNumber = document.getElementById('accountNumberInput').value;
            const password = document.getElementById('passwordInput').value;
            const alertContainer = document.getElementById('loginAlert');
            
            if (clientAccounts[accountNumber] && clientAccounts[accountNumber].password === password) {
                currentAccount = clientAccounts[accountNumber];
                currentAccount.accountNumber = accountNumber;
                
                document.getElementById('loginContainer').style.display = 'none';
                document.getElementById('dashboard').classList.add('active');
                document.getElementById('userInfo').style.display = 'flex';
                document.getElementById('userName').textContent = currentAccount.userName;
                document.getElementById('accountNumber').textContent = accountNumber;
                
                updateDashboard();
                alertContainer.innerHTML = '';
            } else {
                alertContainer.innerHTML = '<div class="alert alert-error">Invalid account number or password. Please try again.</div>';
            }
        });

        function updateDashboard() {
            if (!currentAccount) return;
            
            document.getElementById('currentBalance').textContent = `‚Ç±${currentAccount.currentBalance.toLocaleString()}`;
            document.getElementById('totalGrowth').textContent = `‚Ç±${currentAccount.totalGrowth.toLocaleString()}`;
            document.getElementById('additionalContributions').textContent = `‚Ç±${currentAccount.additionalContributions.toLocaleString()}`;
            document.getElementById('managementFees').textContent = `‚Ç±${currentAccount.managementFees.toLocaleString()}`;
            
            const vestingProgress = (currentAccount.vestingMonths / 24) * 100;
            document.getElementById('vestingProgress').style.width = `${vestingProgress}%`;
            document.getElementById('vestingMonths').textContent = currentAccount.vestingMonths;
            
            const monthlyGrowth = currentAccount.currentBalance * 0.025;
            document.getElementById('monthlyGrowth').textContent = `+‚Ç±${monthlyGrowth.toFixed(0)}`;
            
            updateTransactionHistory();
        }

        function updateTransactionHistory() {
            const transactionList = document.getElementById('transactionList');
            transactionList.innerHTML = '';
            
            const recentTransactions = currentAccount.transactions.slice(-5).reverse();
            
            recentTransactions.forEach(transaction => {
                const transactionItem = document.createElement('div');
                transactionItem.className = 'transaction-item';
                
                const iconClass = transaction.type === 'deposit' ? 'deposit' : 
                                 transaction.type === 'growth' ? 'growth' : 'contribution';
                const iconSymbol = transaction.type === 'deposit' ? 'üí∞' : 
                                  transaction.type === 'growth' ? 'üìà' : 'üíµ';
                const amountClass = transaction.amount >= 0 ? 'positive' : 'negative';
                const amountPrefix = transaction.amount >= 0 ? '+' : '';
                
                transactionItem.innerHTML = `
                    <div class="transaction-details">
                        <div class="transaction-icon ${iconClass}">${iconSymbol}</div>
                        <div class="transaction-info">
                            <h4>${transaction.description}</h4>
                            <p>${new Date(transaction.date).toLocaleDateString('en-US', { 
                                year: 'numeric', 
                                month: 'long', 
                                day: 'numeric' 
                            })}</p>
                        </div>
                    </div>
                    <div class="transaction-amount ${amountClass}">${amountPrefix}‚Ç±${Math.abs(transaction.amount).toLocaleString()}</div>
                `;
                
                transactionList.appendChild(transactionItem);
            });
        }

        function logout() {
            document.getElementById('dashboard').classList.remove('active');
            document.getElementById('loginContainer').style.display = 'flex';
            document.getElementById('userInfo').style.display = 'none';
            
            document.getElementById('loginForm').reset();
            document.getElementById('loginAlert').innerHTML = '';
            currentAccount = null;
        }

        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
            
            if (modalId === 'withdrawalModal' && currentAccount) {
                document.getElementById('availableContributions').textContent = currentAccount.additionalContributions.toLocaleString();
                
                const vestedAmountElement = document.getElementById('vestedAmount');
                if (currentAccount.isVested) {
                    const vestedAmount = currentAccount.initialDeposit + currentAccount.totalGrowth;
                    vestedAmountElement.innerHTML = `<span style="color: #28a745;">‚Ç±${vestedAmount.toLocaleString()}</span>`;
                } else {
                    const monthsRemaining = 24 - currentAccount.vestingMonths;
                    vestedAmountElement.innerHTML = `<span style="color: #6c757d;">‚Ç±0 (${monthsRemaining.toFixed(1)} months remaining)</span>`;
                }
            }
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function downloadStatement() {
            if (!currentAccount) return;
            
            const csvContent = `R2 Solutions - Monthly Statement
Account Number: ${currentAccount.accountNumber}
Account Holder: ${currentAccount.userName}
Email: ${currentAccount.email}
Statement Date: ${new Date().toLocaleDateString()}
ResultsCX Start Date: ${currentAccount.resultsCXStartDate}
Savings Start Date: ${currentAccount.savingsStartDate}

Account Summary:
Current Balance: ‚Ç±${currentAccount.currentBalance.toLocaleString()}
Initial Deposit: ‚Ç±${currentAccount.initialDeposit.toLocaleString()}
Total Growth: ‚Ç±${currentAccount.totalGrowth.toLocaleString()}
Additional Contributions: ‚Ç±${currentAccount.additionalContributions.toLocaleString()}
Management Fees: ‚Ç±${currentAccount.managementFees.toLocaleString()}
Vesting Progress: ${currentAccount.vestingMonths} of 24 months
Vesting Status: ${currentAccount.isVested ? 'VESTED' : 'NOT VESTED'}

Transaction History:
Date,Description,Amount,Balance
${currentAccount.transactions.map(t => 
    `${t.date},${t.description},${t.amount >= 0 ? '+' : ''}‚Ç±${t.amount.toFixed(2)},‚Ç±${t.balance.toFixed(2)}`
).join('\n')}

*Investment returns are projections only and not guaranteed.
*Contact: reliable.resource.02@gmail.com for questions.
`;

            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `R2_Statement_${currentAccount.accountNumber}_${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            URL.revokeObjectURL(url);
        }

        // Contribution form
        document.getElementById('contributionForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const amount = parseFloat(document.getElementById('contributionAmount').value);
            
            if (amount >= 100) {
                currentAccount.additionalContributions += amount;
                currentAccount.currentBalance += amount;
                
                const today = new Date().toISOString().split('T')[0];
                currentAccount.transactions.push({
                    date: today,
                    type: 'contribution',
                    description: 'Additional Contribution',
                    amount: amount,
                    balance: currentAccount.currentBalance
                });
                
                updateDashboard();
                alert(`Successfully added ‚Ç±${amount.toLocaleString()} to your account!`);
                
                closeModal('contributionModal');
                document.getElementById('contributionForm').reset();
            } else {
                alert('Minimum contribution is ‚Ç±100');
            }
        });

        // Withdrawal form
        document.getElementById('withdrawalForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const amount = parseFloat(document.getElementById('withdrawalAmount').value);
            const reason = document.getElementById('withdrawalReason').value;
            const availableAmount = currentAccount.additionalContributions + (currentAccount.isVested ? (currentAccount.initialDeposit + currentAccount.totalGrowth) : 0);
            
            if (amount > availableAmount) {
                alert(`Insufficient available funds. You can withdraw up to ‚Ç±${availableAmount.toLocaleString()}`);
                return;
            }
            
            if (amount >= 100) {
                alert(`Withdrawal request for ‚Ç±${amount.toLocaleString()} has been submitted successfully! You'll receive an email confirmation within 24 hours.`);
                
                closeModal('withdrawalModal');
                document.getElementById('withdrawalForm').reset();
            } else {
                alert('Minimum withdrawal is ‚Ç±100');
            }
        });

        // Close modals when clicking outside
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateDashboard();
        });
    </script>
</body>
</html>
